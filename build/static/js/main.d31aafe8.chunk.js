(this.webpackJsonpbadapicorp=this.webpackJsonpbadapicorp||[]).push([[0],{35:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(7),c=a(8),r=a(11),i=a(13),o=a(12),h=a(0),u=a.n(h),d=a(14),l=a.n(d),p=(a(35),a(15)),j=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).categ=e.categ,n.handleClick=n.handleClick.bind(Object(r.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.setCateg(this.categ)}},{key:"render",value:function(){return Object(n.jsx)(p.a.Item,{className:"d-flex",children:Object(n.jsx)(p.a.Link,{className:"",onClick:this.handleClick,children:this.categ})})}}]),a}(u.a.Component),b=a(26),f=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"createHeaders",value:function(){var e=[],t=Object.keys(this.props.itemData[Object.keys(this.props.itemData)[0]]).map((function(e,t){return Object(n.jsx)("th",{children:e},t)}));return e.push(Object(n.jsx)("tr",{children:t},"xyz")),e}},{key:"createRows",value:function(){var e=this;return Object.keys(this.props.itemData).map((function(t,a){var s=e.props.itemData[t],c=s.type,r=s.name,i=s.color,o=s.price,h=s.manufacturer,u=s.stock;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t}),Object(n.jsx)("td",{children:c}),Object(n.jsx)("td",{children:r}),Object(n.jsx)("td",{children:i}),Object(n.jsx)("td",{children:o}),Object(n.jsx)("td",{children:h}),Object(n.jsx)("td",{children:u})]},t)}))}},{key:"render",value:function(){return Object(n.jsxs)(b.a,{striped:!0,hover:!0,size:"sm",responsive:!0,variant:"dark",className:"text-center text-capitalize",children:[Object(n.jsx)("thead",{children:void 0!==this.props.itemData&&this.createHeaders()}),Object(n.jsx)("tbody",{children:void 0!==this.props.itemData&&this.createRows()})]})}}]),a}(u.a.Component),x=a(27),v=a(21),O=a(29),m=a(16),g=a.n(m),k=a(22),y=a(25),C=function(){function e(t){Object(s.a)(this,e),this.completionPCT=0,this.notch=0,this.setPercent=t}return Object(c.a)(e,[{key:"fetchData",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,a,n,s,c,r,i,o,h,u,d,l,p,j,b,f,x,v,O,m,C,w,D,P,T,E,S,F;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){return(a=Object(y.a)(g.a.mark((function e(a,n){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a);case 3:if(!((s=e.sent).headers.get("x-error-modes-active").length>1)){e.next=8;break}throw new Error("x-error");case 8:return e.abrupt("return",Promise.resolve(s));case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),1!==n){e.next=15;break}throw new Error("n is 1");case 15:return console.log("retried url:"+a),e.next=18,t(a,n-1);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)},t=function(e,t){return a.apply(this,arguments)},n={},s=new Set(["gloves","beanies","facemasks"]),c=new Set,r={},i=Object(k.a)(s),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=22;break}return h=o.value,u="https://cors-anywhere.herokuapp.com/https://bad-api-assignment.reaktor.com/v2/products/".concat(h),e.next=14,fetch(u);case 14:return d=e.sent,e.next=17,d.json();case 17:for(p in l=e.sent,n[h]={},l)void 0!==l[p].manufacturer&&c.add(l[p].manufacturer),j=l[p].id.toUpperCase(),n[h][j]=l[p];case 20:e.next=9;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:this.setPercent(20,"Products"),this.completionPCT=20,this.notch=Math.floor(80/c.size),b=Object(k.a)(c),e.prev=34,b.s();case 36:if((f=b.n()).done){e.next=50;break}return x=f.value,this.setPercent(this.completionPCT,x),v="https://cors-anywhere.herokuapp.com/https://bad-api-assignment.reaktor.com/v2/availability/".concat(x),e.next=42,t(v,5);case 42:return O=e.sent,e.next=45,O.json();case 45:if((m=e.sent).response.length>5)for(C=0;C<m.response.length;C++)w=m.response[C].DATAPAYLOAD,D="<INSTOCKVALUE>",P=w.search(D)+D.length,T=w.search("</INSTOCK"),r[m.response[C].id]=w.substring(P,T);this.completionPCT+=this.notch;case 48:e.next=36;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(34),b.e(e.t1);case 55:return e.prev=55,b.f(),e.finish(55);case 58:this.setPercent(this.completionPCT,"Stockpiles"),E=Object(k.a)(s);try{for(F=function(){var e=S.value;Object.keys(n[e]).forEach((function(t){n[e][t].stock=r[t]}))},E.s();!(S=E.n()).done;)F()}catch(B){E.e(B)}finally{E.f()}return console.log(n),e.abrupt("return",n);case 63:case"end":return e.stop()}}),e,this,[[7,24,27,30],[34,52,55,58]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),w=a(18),D=a(28),P=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getCateg=function(e){var t=e.toLowerCase();n.setState({categ:t})},n.getPercent=function(e,t){n.setState({completionPT:e,loadingTG:t})},n.state={isFetched:!1,isFetchingBg:!1,dataExpiry:null,itemData:null,categ:"gloves",fd:new C(n.getPercent.bind(Object(r.a)(n))),completionPT:0,loadingTG:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.setState({dataExpiry:e.state.dataExpiry+1}),console.log(e.state.dataExpiry)}),1e3),this.state.fd.fetchData().then((function(t){e.setState({isFetched:!0,itemData:t,dataExpiry:0})}))}},{key:"componentDidUpdate",value:function(){var e=this;this.state.dataExpiry>=300&&!1===this.state.isFetchingBg&&(this.state.fd.fetchData().then((function(t){e.setState({dataExpiry:0,itemdata:t,isFetchingBg:!1})})),this.setState({isFetchingBg:!0}))}},{key:"render",value:function(){var e=this.state.categ;return Object(n.jsxs)("div",{children:[Object(n.jsxs)(v.a,{variant:"dark",bg:"dark",sticky:"top",expand:"sm",children:[Object(n.jsx)(v.a.Brand,{href:"#home",children:"BadApi Co."}),Object(n.jsx)(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(p.a,{className:"justify-content-end",children:[Object(n.jsx)(j,{setCateg:this.getCateg.bind(this),categ:"Gloves"}),Object(n.jsx)(j,{setCateg:this.getCateg.bind(this),categ:"Beanies"}),Object(n.jsx)(j,{setCateg:this.getCateg.bind(this),categ:"Facemasks"})]})})]}),Object(n.jsx)(x.a,{fluid:"lg",className:"px-0",children:Object(n.jsxs)("div",{children:[!0!==this.state.isFetched&&Object(n.jsxs)(D.a,{children:[Object(n.jsxs)("h3",{className:"text-center",children:["Loading data: ",this.state.loadingTG]}),Object(n.jsx)(O.a,{animated:!0,variant:"success",now:this.state.completionPT})]}),this.state.isFetched&&Object(n.jsx)(f,{itemData:this.state.itemData[e]})]})})]})}}]),a}(u.a.Component);l.a.render(Object(n.jsx)(P,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d31aafe8.chunk.js.map